<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inkly - Desenhe! üé®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap');
        * { font-family: 'Fredoka', sans-serif; }
        canvas { cursor: crosshair; touch-action: none; }
        
        @keyframes confetti {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            animation: confetti 3s linear;
            pointer-events: none;
            z-index: 1000;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-500 via-pink-500 to-orange-400 min-h-screen p-4">
    <div class="max-w-7xl mx-auto">
        <div class="bg-white rounded-3xl shadow-2xl p-6 mb-4 flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-purple-600">üé® Inkly</h1>
                <p class="text-gray-600">Ol√°, <span id="playerName">{{ player.name }}</span>!</p>
            </div>
            <div class="flex gap-4 items-center">
                <div class="text-center">
                    <div class="text-2xl font-bold text-purple-600" id="level">Nv. {{ player.level }}</div>
                    <div class="text-sm text-gray-500">N√≠vel</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-pink-600" id="xp">{{ player.xp }} XP</div>
                    <div class="text-sm text-gray-500">Experi√™ncia</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-orange-600" id="streak">{{ player.streak }}üî•</div>
                    <div class="text-sm text-gray-500">Sequ√™ncia</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4">
            <div class="lg:col-span-1">
                <div class="bg-white rounded-2xl shadow-xl p-4 mb-4">
                    <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                        <span class="text-2xl mr-2">üñåÔ∏è</span> Pinc√©is
                    </h3>
                    <div class="grid grid-cols-2 gap-2" id="brushes"></div>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-4 mb-4">
                    <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                        <span class="text-2xl mr-2">üé®</span> Cores
                    </h3>
                    <div class="grid grid-cols-6 gap-2 mb-3" id="colorPalette"></div>
                    <div class="mt-3">
                        <label class="text-sm text-gray-600 block mb-1">Gradiente RGB</label>
                        <div class="flex gap-2">
                            <input type="range" id="colorR" min="0" max="255" value="0" class="w-full">
                            <span class="text-xs font-mono w-8" id="rVal">0</span>
                        </div>
                        <div class="flex gap-2">
                            <input type="range" id="colorG" min="0" max="255" value="0" class="w-full">
                            <span class="text-xs font-mono w-8" id="gVal">0</span>
                        </div>
                        <div class="flex gap-2">
                            <input type="range" id="colorB" min="0" max="255" value="0" class="w-full">
                            <span class="text-xs font-mono w-8" id="bVal">0</span>
                        </div>
                        <div class="mt-2 h-8 rounded-lg border-2" id="rgbPreview"></div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-4">
                    <h3 class="font-bold text-gray-800 mb-3">Tamanho</h3>
                    <input type="range" id="brushSize" min="2" max="40" value="8" class="w-full">
                    <div class="text-center text-gray-600 mt-2" id="sizeVal">8px</div>
                </div>
            </div>

            <div class="lg:col-span-3">
                <div class="bg-white rounded-2xl shadow-xl p-6 mb-4" id="promptCard">
                    <div class="text-center">
                        <h2 class="text-4xl font-bold text-gray-800 mb-2" id="prompt">Carregando...</h2>
                        <div class="flex justify-center items-center gap-4">
                            <div class="text-6xl font-bold text-purple-600" id="timer">20</div>
                            <button onclick="startDrawing()" id="startBtn" 
                                class="bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-4 px-8 rounded-xl hover:scale-105 transform transition-all">
                                ‚ñ∂Ô∏è Come√ßar!
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-4">
                    <div class="flex justify-between mb-3">
                        <h3 class="font-bold text-gray-800">Sua Tela ‚ú®</h3>
                        <button onclick="clearCanvas()" class="text-red-500 hover:text-red-700 font-semibold">
                            üóëÔ∏è Limpar
                        </button>
                    </div>
                    <canvas id="canvas" width="800" height="600"
                        class="w-full border-4 border-purple-300 rounded-xl bg-white"></canvas>
                    <div class="mt-3 flex gap-2">
                        <button onclick="submitDrawing()" id="submitBtn" disabled
                            class="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-6 rounded-xl hover:scale-105 transform transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                            ‚úÖ Enviar Desenho
                        </button>
                        <button onclick="skipPrompt()"
                            class="bg-gray-300 text-gray-700 font-bold py-3 px-6 rounded-xl hover:bg-gray-400">
                            ‚è≠Ô∏è Pular
                        </button>
                    </div>
                </div>

                <div class="mt-4 bg-white rounded-2xl shadow-xl p-6 text-center" id="aiMascot">
                    <div class="text-6xl mb-2" id="aiEmoji">ü§ñ</div>
                    <p class="text-gray-600 text-lg" id="aiMessage">Esperando seu desenho...</p>
                </div>
            </div>
        </div>
    </div>

    <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-50">
        <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full mx-4">
            <div class="text-center">
                <div class="text-8xl mb-4" id="resultEmoji">üéâ</div>
                <h2 class="text-4xl font-bold mb-4" id="resultTitle">Incr√≠vel!</h2>
                <p class="text-2xl text-gray-600 mb-6" id="resultMessage"></p>
                
                <div class="bg-purple-50 rounded-2xl p-6 mb-6">
                    <h3 class="font-bold text-gray-800 mb-3">A IA pensou:</h3>
                    <div id="aiGuesses" class="space-y-2"></div>
                </div>
                
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-4">
                        <div class="text-3xl font-bold text-purple-600" id="scoreVal">+0</div>
                        <div class="text-sm text-gray-600">Pontos</div>
                    </div>
                    <div class="bg-gradient-to-r from-blue-100 to-green-100 rounded-xl p-4">
                        <div class="text-3xl font-bold text-blue-600" id="xpVal">+0 XP</div>
                        <div class="text-sm text-gray-600">Experi√™ncia</div>
                    </div>
                </div>
                
                <div id="achievementsDisplay" class="mb-6 hidden">
                    <h3 class="font-bold text-yellow-600 mb-2">üèÜ Conquistas Desbloqueadas!</h3>
                    <div id="achievementsList"></div>
                </div>
                
                <button onclick="nextRound()"
                    class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-4 px-8 rounded-xl text-xl hover:scale-105 transform transition-all">
                    ‚û°Ô∏è Pr√≥ximo Desenho
                </button>
            </div>
        </div>
    </div>

    <script src="/static/game.js"></script>
</body>
</html>
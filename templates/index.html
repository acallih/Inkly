<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inkly - Desenhe com IA! ğŸ¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap');
        * { font-family: 'Fredoka', sans-serif; }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(168, 85, 247, 0.4); }
            50% { box-shadow: 0 0 40px rgba(168, 85, 247, 0.8); }
        }
        
        .float { animation: float 3s ease-in-out infinite; }
        .glow { animation: glow 2s ease-in-out infinite; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4">
    <audio id="bgMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <div class="max-w-2xl w-full">
        <div class="text-center mb-8 float">
            <h1 class="text-7xl font-bold text-white mb-2">ğŸ¨ Inkly</h1>
            <p class="text-2xl text-purple-200">Desenhe e surpreenda a IA!</p>
        </div>

        <div class="bg-white rounded-3xl shadow-2xl p-8 mb-6 glow">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4">ğŸ¤–âœ¨</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Bem-vindo ao Inkly!</h2>
                <p class="text-gray-600 text-lg">
                    Uma IA vai tentar adivinhar o que vocÃª estÃ¡ desenhando.<br>
                    SerÃ¡ que consegue confundir ou impressionar ela? ğŸ­
                </p>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 font-semibold mb-2 text-lg">Como vocÃª se chama?</label>
                <input type="text" id="playerName" placeholder="Digite seu nome..."
                    class="w-full px-6 py-4 text-lg border-4 border-purple-300 rounded-2xl focus:outline-none focus:border-purple-500 transition-all"
                    maxlength="20">
            </div>

            <button onclick="startGame()"
                class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-5 px-8 rounded-2xl text-xl hover:scale-105 transform transition-all shadow-lg hover:shadow-xl">
                ğŸš€ ComeÃ§ar a Desenhar!
            </button>

            <div class="mt-6 text-center">
                <button onclick="toggleMusic()" id="musicBtn"
                    class="text-purple-600 hover:text-purple-800 font-semibold flex items-center justify-center mx-auto">
                    <span class="text-2xl mr-2">ğŸµ</span>
                    <span id="musicStatus">Ativar MÃºsica</span>
                </button>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white bg-opacity-90 rounded-2xl p-6 text-center transform hover:scale-105 transition-all">
                <div class="text-4xl mb-2">ğŸ¨</div>
                <h3 class="font-bold text-gray-800 mb-1">PincÃ©is MÃ¡gicos</h3>
                <p class="text-sm text-gray-600">Desbloqueie pincÃ©is especiais</p>
            </div>
            <div class="bg-white bg-opacity-90 rounded-2xl p-6 text-center transform hover:scale-105 transition-all">
                <div class="text-4xl mb-2">ğŸ†</div>
                <h3 class="font-bold text-gray-800 mb-1">Conquistas</h3>
                <p class="text-sm text-gray-600">Desbloqueie trofÃ©us Ã©picos</p>
            </div>
            <div class="bg-white bg-opacity-90 rounded-2xl p-6 text-center transform hover:scale-105 transition-all">
                <div class="text-4xl mb-2">ğŸ¤</div>
                <h3 class="font-bold text-gray-800 mb-1">Multiplayer</h3>
                <p class="text-sm text-gray-600">Desafie seus amigos</p>
            </div>
        </div>

        <div class="text-center mt-8 text-white text-sm">
            <p>âœ¨ Powered by Google Gemini AI âœ¨</p>
        </div>
    </div>

    <script>
        let musicPlaying = false;
        const music = document.getElementById('bgMusic');

        function toggleMusic() {
            musicPlaying = !musicPlaying;
            if (musicPlaying) {
                music.play();
                document.getElementById('musicStatus').textContent = 'Pausar MÃºsica';
                document.getElementById('musicBtn').innerHTML = '<span class="text-2xl mr-2">ğŸ”Š</span><span id="musicStatus">Pausar MÃºsica</span>';
            } else {
                music.pause();
                document.getElementById('musicStatus').textContent = 'Ativar MÃºsica';
                document.getElementById('musicBtn').innerHTML = '<span class="text-2xl mr-2">ğŸµ</span><span id="musicStatus">Ativar MÃºsica</span>';
            }
        }

        async function startGame() {
            const name = document.getElementById('playerName').value.trim();
            if (!name) {
                alert('Por favor, digite seu nome! ğŸ˜Š');
                return;
            }

            try {
                const btn = event.target;
                btn.disabled = true;
                btn.innerHTML = 'ğŸ¨ Preparando sua tela...';
                
                const response = await fetch('/api/player/create', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({name})
                });

                const data = await response.json();
                localStorage.setItem('inkly_player_id', data.player_id);
                localStorage.setItem('inkly_music', musicPlaying);
                window.location.href = `/game?player_id=${data.player_id}`;
            } catch (error) {
                alert('Ops! Algo deu errado. Tente novamente! ğŸ™');
                btn.disabled = false;
                btn.innerHTML = 'ğŸš€ ComeÃ§ar a Desenhar!';
            }
        }

        document.getElementById('playerName').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') startGame();
        });
    </script>
</body>
</html>